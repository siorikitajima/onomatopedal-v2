<html lang="en">
    <%- include('./partials/head.ejs')  %> 
<body>
    <%- include('./partials/nav.ejs')  %> 

    <div class="content forms">
        <h2>Track and Info</h2>
        <form action="/info" method="POST" enctype="multipart/form-data">
            <label for="trackName">Track Name</label>
            <input type="text" id="trackName" name="trackName" value="<%= pedal.trackName %>">
            <% if (file == true) {%>
                <div class="flex" id="audioBtns">
                <div class="halfBtns" id="playbtn" onclick="playTrack()">Play</div>
                <div class="halfBtns" id="reuploadBtn" onclick="reuploadTrack()">Reupload</div>
                </div>
            <% } else {%>
                <input type="file" width="400" name="trackFile" id="trackFile" style="padding: 10px;">
            <% }%>
            <label for="artist">Artist Name(s)</label>
            <input type="text" id="artist" name="artist" value="<%= pedal.artist%>">
            <label for="website">Website(s)</label>
            <input type="text" id="website" name="website" value="<%= pedal.website%>">
            <label for="onomato">Onomatopoeia</label>
            <input type="text" id="onomato" name="onomato" value="<%= pedal.onomato%>">
            <label for="onoMeaning">Onomatopoeia Meaning</label>
            <input type="text" id="onoMeaning" name="onoMeaning" value="<%= pedal.onoMeaning%>">
            <button type="submit">Save</button>
            <input id="hiddenKeyName" type="hidden" name="name" value="<%= pedal.name%>">
            <input id="hiddenKeyName" type="hidden" name="pedalFull" value="<%= pedal.pedalFull%>">
        </form>
    </div>
    <%- include('./partials/footer.ejs')  %> 
    <script>
        function playTrack() {
            pedal = <%- JSON.stringify(pedal) %> ;
            var name = pedal.name;
            var randomNumber = Math.floor(Math.random() * 100);
            var theTrack = new Audio('sound/' + name + '/track.mp3?' + randomNumber);
            theTrack.play();
        };
        function reuploadTrack() {
            var audioBtns = document.querySelector('#audioBtns');
            audioBtns.innerHTML = '<input type="file" width="400" name="trackFile" id="trackFile" style="padding: 10px;">';
        }
    </script>
</body>
</html>